---
title: WSL安装到D盘完全指南
date: 2025-09-17 12:00:00
tags:
  - WSL
  - Linux
  - Windows
  - 系统配置
categories:
  - Tech

cover: https://telegraph.ttwwjj.ddns-ip.net/file/AgACAgUAAyEGAAShY8_eAAOXaQycidMzFnfzi2227NH8v4yvllgAApsPaxuAKWBU5LE7E26d1_MBAAMCAAN5AAM2BA.png
description: 彻底清理现有WSL环境，在D盘重新建立全新的Linux环境，并启用图形化界面的完整指南

---

# 告别双系统！在 Windows 上优雅地使用 Linux：WSL 新手完全指南

![Windows Loves Linux Logo](https://img.shields.io/badge/Windows%20%E2%9D%A4%EF%B8%8F%20Linux-blue)

## 文章目录

- [WSL 到底是什么？一个绝妙的比喻](#wsl-到底是什么一个绝妙的比喻)
- [我为什么需要 WSL？它能给我带来什么？](#我为什么需要-wsl它能给我带来什么)
- [第 I 部分：环境检查与完全清理](#第-i-部分环境检查与完全清理)
- [第 II 部分：在 D 盘重装 WSL 与 Linux 发行版](#第-ii-部分在-d-盘重装-wsl-与-linux-发行版)
- [第 III 部分：启用并体验图形化界面 (WSLg)](#第-iii-部分启用并体验图形化界面-wslg)
- [新手入门：我的第一个 WSL 体验](#新手入门我的第一个-wsl-体验)
- [总结：欢迎来到新世界](#总结欢迎来到新世界)

> 💡 **提示**：在开始之前，请确保您已备份所有重要数据，并拥有管理员权限。

> ⚠️ **注意**：本教程适用于 Windows 10 版本 2004 及以上或 Windows 11 系统。

---

嘿，朋友！你是不是也曾有过这样的经历：

*   看着技术大神们在黑乎乎的命令行窗口里敲着酷炫的命令，心生羡慕？
*   翻阅一篇编程教程，却发现里面的工具和命令在你的 Windows 上根本无法运行？
*   想学习强大的 Linux，却被安装双系统或笨重的虚拟机的复杂过程劝退？

如果你的答案是"是"，那么恭喜你，今天你将认识一个能彻底改变你 Windows 使用体验的神器——**WSL (Windows Subsystem for Linux)**。

## WSL 到底是什么？一个绝妙的比喻

想象一下，你的 Windows 系统是一栋装修精美、功能齐全的大房子。

在过去，如果你想体验 Linux 系统，你有两个选择：
1.  **装双系统**：相当于在你的房子旁边又盖了一栋独立的"Linux 别墅"。你想去别墅里玩，就得先从大房子里出来（关机），再走进别墅（开机进入 Linux）。两边不互通，非常麻烦。
2.  **用虚拟机**：这就像在你的大房子里，用厚厚的隔板搭出了一个"Linux 模拟房"。它很笨重，占用很多资源（内存、CPU），而且你总感觉隔着一层玻璃在操作，性能也不好。

而 **WSL** 呢？它就像一位顶级的建筑设计师，直接在你的 Windows 大房子里，**完美地内嵌了一个原汁原味的"Linux 功能房"**！

*   **它不是模拟的**：这个房间里所有的工具、水管、电路（系统内核）都是纯正的 Linux 标准。
*   **它无缝衔接**：你可以随时从客厅（Windows）走进这个房间（Linux），甚至可以直接从客厅的窗户把工具递进去使用。它们之间文件互通，网络共享，亲密无间。
*   **它轻巧高效**：这个房间不需要额外的地基和墙体，所以它启动飞快，占用的资源也少得多。

简单来说，**WSL 让你可以在 Windows 系统上，直接运行一个真正的、完整的 Linux 环境，就像运行一个普通软件一样简单。**

## 我为什么需要 WSL？它能给我带来什么？

对于技术小白来说，WSL 至少有三大好处：

1.  **绝佳的学习平台**：想学习世界上最流行的服务器操作系统 Linux 吗？WSL 就是你最安全、最便捷的"新手村"。你可以在里面大胆尝试各种命令，即使玩坏了，删掉重装一下就好，完全不会影响你的 Windows 系统。

2.  **解锁强大的开发工具**：大量的编程语言（如 Python, Node.js, Ruby）、开发工具（如 Docker, Git）和服务器软件（如 Nginx, MySQL）都诞生于 Linux，或者在 Linux 上运行得最好。有了 WSL，你就能在 Windows 上使用和官网教程一模一样的命令来安装和配置它们，告别各种"Windows 特供版"的坑。

3.  **体验高效的命令行**：Linux 的命令行工具（如 `grep`, `awk`, `sed`）在处理文本、管理文件方面极其强大。一旦你习惯了它们，你会发现比在图形界面里点来点去要高效得多。

## 第 I 部分：环境检查与完全清理

这一步的目标是抹去所有当前 WSL 的痕迹，为您在 D 盘的全新安装铺平道路。

### 1. 查看当前 WSL 状态并卸载发行版

首先，我们需要卸载所有已经安装的 Linux 发行版。

*   **以管理员身份打开 PowerShell**。
*   列出所有已安装的发行版：
    ```powershell
wsl --list --verbose
```
*   您会看到类似 `Ubuntu-22.04` 和 `docker-desktop` 的条目。使用 `wsl --unregister` 命令逐一卸载它们。**此操作会永久删除该发行版内的所有数据**。
    ```powershell
    wsl --unregister Ubuntu-22.04
    wsl --unregister docker-desktop
    # 如果还有其他发行版，也一并卸载
    ```
*   再次运行 `wsl --list --verbose` 确认列表为空。

### 2. 卸载 Docker Desktop

由于您也安装了 Docker Desktop，它与 WSL 紧密集成，需要通过标准方式卸载。

*   打开 Windows 的 "设置" -> "应用" -> "安装的应用"。
*   在应用列表中搜索 "Docker Desktop"。
*   点击它，然后选择 "卸载"。按照卸载程序的提示完成操作。

### 3. 禁用 WSL 相关 Windows 功能

这是最关键的一步，它会彻底关闭 WSL 和其依赖的虚拟机平台。

*   在 Windows 搜索栏中输入 "启用或关闭 Windows 功能" 并打开它。
*   在弹出的窗口中，向下滚动并**取消勾选**以下两个项目：
    *   **适用于 Linux 的 Windows 子系统 (Windows Subsystem for Linux)**
    *   **虚拟机平台 (Virtual Machine Platform)**
*   点击 "确定"。Windows 会应用这些更改，并**要求您重启计算机**。请务必重启。

### 4. 重启后验证清理

重启计算机后，再次**以管理员身份打开 PowerShell**。

*   运行 `wsl --status` 或 `wsl -l -v`。
*   此时，系统应该会提示您 WSL 未安装，或者返回一个错误，提示您需要通过 `wsl --install` 命令来安装。这表明 WSL 已经被成功禁用了。

到这里，您的系统已经回到了一个没有安装 WSL 的"出厂"状态。

## 第 II 部分：在 D 盘重装 WSL 与 Linux 发行版

现在我们开始全新的安装过程，并确保所有核心文件都位于 D 盘。

### 1. 创建 D 盘专用目录

在 D 盘上创建一个专门用于存放 WSL 虚拟机磁盘文件的文件夹。

*   在 PowerShell 中运行：
    ```powershell
    mkdir D:\WSL
    ```

### 2. 配置 WSL 默认安装位置

在安装 WSL 之前，我们可以通过一个配置文件告诉系统，以后所有通过 `wsl --install` 安装的发行版都应该放到 D 盘。

*   打开文件资源管理器，在地址栏输入 `%UserProfile%` 并回车。
*   在此目录下创建一个名为 `.wslconfig` 的文本文件。
*   用记事本或任何文本编辑器打开这个文件，并添加以下内容：
    ```ini
    [wsl2]
    # 将所有新安装的发行版的虚拟磁盘 (.vhdx) 存放到 D:\WSL
    root="D:\\WSL"
    ```
    **注意**：路径中的反斜杠 `\` 需要双写成 `\\`。保存并关闭文件。

### 3. 重新启用 WSL 功能并安装

现在，我们可以用一条命令完成所有核心组件的安装。

*   **以管理员身份打开 PowerShell**。
*   运行以下命令来安装 WSL 核心组件，并同时安装广受欢迎的 Ubuntu 最新长期支持版（LTS）：
    ```powershell
    wsl --install -d Ubuntu
    ```
    *   这个命令会自动启用 "虚拟机平台" 和 "适用于 Linux 的 Windows 子系统" 功能。
    *   它会下载并安装最新的 WSL 内核。
    *   它会从 Microsoft Store 下载并安装 Ubuntu 发行版。由于我们配置了 `.wslconfig` 文件，它的虚拟磁盘文件 `ext4.vhdx` 会被自动创建在 `D:\WSL` 目录下。
*   安装过程结束后，系统会**再次提示您重启计算机**。请重启。

### 4. 初始化 Linux 发行版并设置用户

重启后，系统通常会自动启动新安装的 Ubuntu 终端窗口，让您设置新用户。

*   如果窗口没有自动弹出，可以从"开始"菜单中点击 "Ubuntu" 来启动它。
*   按照提示，输入您想要的 **用户名** (例如 `myuser`) 并按回车。
*   接着输入并确认您的 **密码**。请记住这个密码，以后使用 `sudo` 命令时会用到。

至此，您已经成功在 D 盘上安装了一个全新的、简洁的 Ubuntu 系统。您可以通过文件资源管理器访问 `D:\WSL` 目录，会看到一个名为 `Ubuntu` 的文件夹，其中包含了 `ext4.vhdx` 文件。

## 第 III 部分：启用并体验图形化界面 (WSLg)

现代版的 WSL 已经内置了图形化支持 (WSLg)，无需安装桌面环境，可以直接运行单个 GUI 应用。

### 1. 验证系统支持

您的系统信息显示 WSL 版本为 `2.5.10.0`，Windows 版本为 `10.0.22631`，这完全满足 WSLg 的要求。无需额外验证。

### 2. 安装并启动一个 GUI 应用

让我们安装一个简单的 Linux 图形应用来测试一下。

*   打开您的 Ubuntu 终端。
*   首先，更新软件包列表：
    ```bash
    sudo apt update
    ```
*   安装一个轻量级的文本编辑器 `gedit`：
    ```bash
    sudo apt install gedit -y
    ```
*   安装完成后，直接在命令行中输入应用名来启动它：
    ```bash
    gedit
    ```

您会看到一个 Gedit 的窗口像原生 Windows 应用一样出现在桌面上！它有自己的图标，可以自由缩放和移动。这证明了您的图形化界面已经可以正常工作。您可以用同样的方法安装和运行其他 Linux GUI 应用，例如浏览器 (Firefox)、文件管理器 (Nautilus) 等。

## 新手入门：我的第一个 WSL 体验

说了这么多，不如亲自上手体验一下。现代的 WSL 安装极其简单。

### 第一步：一键安装

以管理员身份打开你的 PowerShell 或 Windows 终端，然后只需输入下面这行命令：

```powershell
wsl --install
```
它会自动帮你搞定所有事情，可能需要重启一下电脑。

### 第二步：启动你的 Linux

重启后，从"开始"菜单找到一个叫 "Ubuntu" 的图标，点击它！一个命令行窗口会弹出，让你设置用户名和密码。恭喜，你已经进入了你的 Linux 世界！

### 第三步：试试这几个命令

*   `pwd`：告诉你"我现在在哪里？"（显示当前目录）
*   `ls -l`：列出当前目录下所有的文件和文件夹。
*   `sudo apt update && sudo apt upgrade`：这是 Linux (Ubuntu/Debian系) 的"刷新"咒语。它会更新软件列表并升级所有已安装的软件，最好定期敲一下。

### 第四步：见证奇迹的时刻——运行图形化应用！

谁说命令行不能多姿多彩？WSL 现在已经原生支持图形化界面了！不信？在你的 Ubuntu 终端里试试：

1.  安装一个简单的文本编辑器 `gedit`：
    ```bash
    sudo apt install gedit -y
    ```
2.  直接运行它：
    ```bash
    gedit
    ```
看到了吗？一个 Linux 的程序窗口就这样神奇地出现在了你的 Windows 桌面上！你可以像操作记事本一样使用它。

## 总结：欢迎来到新世界

WSL 打破了 Windows 和 Linux 之间的次元壁，它不是一个复杂的工具，而是一个赋能者。它让你能够站在巨人的肩膀上，同时享受 Windows 舒适的桌面生态和 Linux 强大的开发生态。

对于初学者而言，它极大地降低了学习门槛，提供了一个完美的实践环境。

恭喜您！您已经成功完成了所有目标：彻底清理了旧环境，并在 D 盘上建立了一个全新的、轻量化的、支持图形界面的 WSL 开发环境。

你的探索之旅才刚刚开始。去吧，去安装一个你感兴趣的编程语言，或者尝试部署你的第一个个人网站。有了 WSL，这个曾经看起来遥不可及的世界，现在就在你的指尖。